{% extends "user/layouts/quiz.html" %}

{% block content-body %}
<div class="lockscreen-logo">
    <h2 href="" style="color: #7D4196;"><b>Career4U Assessment</b></h2>
</div>
<p class="lockscreen-name">For each of the statement below choose the number between 1 to 5 to rate how they describes
    you.</p>
<!-- <p class="help-block text-center">
    1) No, the statement is not at all like me. 2) The statement is little like me. 3) The statement is somewhat like
    me. 4) The statement is a lot like me. 5) Yes, the statement is definitely me.</p> -->

</br>
<div class="col-lg-12">

    <div class="card card-primary card-outline quizContainer">
        <div class="card-header">
            <h5 class="m-0" id="quizQuestion">I can use lots of different words to express myself.</h5>
        </div>
        <div id="csrf">
          {% csrf_token %}
        </div>
        <div class="card-body">
            <ul style="list-style: none;">
                <li style="padding-bottom: 10px;"><input type="radio" name="options" class="optionNumbers" id="opt1" value="1"/>   No, the statement is not at all like me</li>
                <li style="padding-bottom: 10px;"><input type="radio" name="options" class="optionNumbers" id="opt2" value="2" />   The statement is little like me</li>
                <li style="padding-bottom: 10px;"> <input type="radio" name="options" class="optionNumbers" id="opt3" value="3" />  The statement is somewhat like me.</li>
                <li style="padding-bottom: 10px;"> <input type="radio" name="options" class="optionNumbers" id="opt4" value="4" />  The statement is a lot like me</li>
                <li style="padding-bottom: 10px;"> <input type="radio" name="options" class="optionNumbers" id="opt5" value="5" />  Yes, the statement is definitely me.</li>
            </ul>
           
            <input type="hidden" name="sid" id="sid" value="{{sid}}" />
            <input type="hidden" name="email" id="email" value="{{email}}" />
            <div class="help-block text-center">
                <a href="#" class="btn btn-primary text-center" style="background: transparent linear-gradient(45deg, #7D4196 0%, #FF3494 100%) 0% 0% no-repeat padding-box !important;" id="quizNext" onclick="GoToNextQues()">Next</a>
            </div>
        </div>
    </div>
</div>
<script>
    let quizQuestionContainer = document.getElementById("quizQuestion");
    let optionNumbers = document.getElementsByName("options");
    let quizQuestion = [
      // verbal
       `I feel comfortable working with language and words.|c1`,
      `I enjoy crosswords and other word games  like Scrabble.|c1`,
       `I tend to remember things exactly as they are said to me.|c1`,
      //`I enjoy participating in debates and/or discussions.|c1`,
      `I find it easy to explain things to others.|c1`,
      //`I enjoy keeping a written journal and/or writting stories and articles.|c1`,
      //`I like to read a lot.|c1`,
      // logical
       `I work best in an organized work area.|c2`,
       `I enjoy maths and using numbers.|c2`,
       `I keep a things to do list.|c2`,
      // `I enjoy playing brainteasers and logic puzzles.|c2`,
      // `I like to us 'why' questions.|c2`,
      // `I work best when i have a day planner or timetable.|c2`,
      // `I quickly grasp cause and effect relationship.|c2`,
      // `I always do things one step at a time.|c2`,
      //Spatial
      `I understand color combinations and what colors work well together.|c3`,
       `I enjoy solving jigsaw, maze and/or other visual puzzles.|c3`,
      // `I read charts and maps easily.|c3`,
      // `I have a good sence of direction.|c3`,
      // `I like to watch the scenes and activities in movies.|c3`,
      // `I am obersevant. I often see things that others miss.|c3`,
      // `I can anticipate the moves and consequences in a game plan(i.e hockey sense, chess sense).|c3`,
      // `I can picture scenes in my head when I remember things.|c3`,
      //Musical
        `I often play music in my mind.|c4`,
        `My mood changes when I listen to music.|c4`,
      // `It is easy for me to follow the beat of music.|c4`,
       `I can pick out different instuments when I listen to a piece of music.|c4`,
      // `I keep time when music is palying.|c4`,
      // `I can hear an off-key note.|c4`,
      // `I find it easy to engage in musical activities.|c4`,
      // `I can remember pieces of music easily.|c4`,
      // Interpersonal
        `I can sense the moods and feelings of others.|c5`,
        `I work best when interacting with people.|c5`,
       `I enjoy team sports rather than individual sports.|c5`,
      // `I can sort out arguments between friends.|c5`,
      // `I prefer group activities rather than ones I do alone.|c5`,
      // `I enjoy learning about different cultures.|c5`,
      // `I enjoy social events like parties.|c5`,
      // `I enjoy sharing my ideas and feelings with others.|c5`,
      // Naturaslistic
        `Pollution makes me angry.|c6`,
        `I notice similarities and differences in trees, flowers and other things in nature.|c6`,
       `I feel very strongly about protecting the environment.|c6`,
      // `I enjoy watching nature programs on television.|c6`,
      // `I engage in 'clean-up days.|c6`,
      // `I like planting and caring for a garden.|c6`,
      // `I enjoy fishing, bushwalking and bird-watching.|c6`,
      // `When I leave school, I hope to work with plants and animals.|c6`,
      // Body/Kinesthetic
        `I like to move, tap or fidget when sitting.|c7`,
        `I enjoy participating in active sports.|c7`,
       `I am curious as to how things feel and I then to touch objects and examine their texture.|c7`,
      // `I am well co-ordinated.|c7`,
      // `I like working with my hands.|c7`,
      // `I prefer to be physically involved rather than sittig and watching.|c7`,
      // `I understand best by doing(i.e touching, moving and interacting).|c7`,
      // `I like to think though problems while i walk or run.|c7`,
      // Intrapersonal
      //  `I know myself well.|c8`,
      //  `I have a few close friends.|c8`,
       `I have strong opinions about controvesial issues.|c8`,
       `I work best when the activity is self-paced.|c8`,
       `I am not easily influensed by other people.|c8`,
      // `I have a good understanding of my feelings and how i will react to situations.|c8`,
      // `I often raise questions concerning values and beliefs.|c8`,
      // `I enjoy woking on my own.|c8`,
    ];
    let passedQues = [`I can use lots of different words to express myself.|c1`];
    var noOfQuesPassed = 0;
    var noOfQues = 2;
    var QuestionCategory;
    var OriginQuizeQuestion = quizQuestion.length;
    
    {
      function GoToNextQues() {
        var user_id = $('#sid').val(); 
        var user_email = $('#email').val();
        //alert('UserID='+user_id);
        var csrftoken = jQuery("[name=csrfmiddlewaretoken]").val();
    
        for (
          let optionNumbersCount = 0;
          optionNumbersCount < optionNumbers.length;
          optionNumbersCount++
        ) {
          if (
            optionNumbers[0].checked ||
            optionNumbers[1].checked ||
            optionNumbers[2].checked ||
            optionNumbers[3].checked ||
            optionNumbers[4].checked
          ) {

            if (quizQuestion.length==0) {
              swal({
                title: 'Congratulations',
                text: "Thank You For Taking Assessment",
                type: 'success',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Yes'
                },function() 
                {
                  window.open('{% url "report" %}');
                }
              );
                //swal("Congratulations", "Thank You For Taking Assessment", "success");
                
            }else{
                // swal({
                // title: 'Are you sure?',
                // text: "You want to submit your response, This will not be changed/edited later!!",
                // type: 'warning',
                // showCancelButton: true,
                // confirmButtonColor: '#3085d6',
                // cancelButtonColor: '#d33',
                // confirmButtonText: 'Yes'
                // },function() 
                // {

                    if (quizQuestion.length!=OriginQuizeQuestion) {
                      var category = QuestionCategory.substring(QuestionCategory.indexOf('|') + 1);
                      //alert('PreviousCategory='+category);
                     // var question = PreviousQuestionCategory.substring(PreviousQuestionCategory.indexOf('*') + 1);
                     // alert('quest='+question);
                     // var category = PreviousQuestionCategory.substring(PreviousQuestionCategory.indexOf('*') + 1);
                    }
                    else if(noOfQues==2){
                      var question = 'q1';
                      var category = 'c1';
                    }
                    //alert('quizQuestion='+quizQuestion.length);
                    var PreviousSelectedOption =  $("input[type='radio'][name='options']:checked").val();

                    //alert('PreviousSelectedOption='+PreviousSelectedOption);

                    //Start Store answer to database
                    $.ajax(
                      {
                          url: "{% url 'saveResponse' %}",
                          type:"POST",
                          headers: {'X-CSRFToken': csrftoken},
                          data:{
                            user_id: user_id,
                            user_email: user_email,
                            // question: question,
                            category: category,
                            option: PreviousSelectedOption
                          },
                          success: function( data ) 
                          {
                              if(data=='Success'){
                                  //display next question
                                  var randnomValue = Math.floor(Math.random() * quizQuestion.length);
                                  //alert(randnomValue);
                                  var que = quizQuestion[randnomValue];

                                  //Split the question and type of categories
                                  QuestionCategory = que.substring(que.indexOf('|') + 0);
                                  //alert(QuestionCategory);

                                  //replace category of question from string with blank space
                                  //console.log('Inc=',noOfQues);
                                  quizQuestionContainer.innerHTML =
                                      noOfQues + ")&nbsp;&nbsp;&nbsp;" + que.replace(QuestionCategory,'');
                                    
                                  quizQuestion.splice(randnomValue, 1);
                                  //alert(quizQuestion.replace(QuestionCategory,''));
                                  //console.log('Before Inc=',noOfQues);
                                  noOfQues++;
                                  //console.log('After Inc=',noOfQues);
                                  for (
                                      let deSelect = 0;
                                      deSelect < optionNumbers.length;
                                      deSelect++
                                  ) {
                                      optionNumbers[deSelect].checked = false;
                                  }
                                //---------------
                              }
                          }
                      })
                    //End Store answer to database
                  
                                 //---------------

                // });

            }
            break;
          } else {
            swal("Oops !", "Please choose any one of the option", "warning");
            
            break;
          }
          console.log(noOfQuesPassed, que);
        }
      }
    }
  </script>
{% endblock %}

  